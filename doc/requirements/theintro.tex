%
% introductory thoughts
%

\section{Introduction}
\label{sec:intro}

%The next-generation Event Horizon Telescope (ngEHT) is a significant and transformative extension of the EHT, the design of which is funded by a \ac{MSRI} award from the NSF.
%The \ac{EHT} has launched a \ac{MSRI} project with the goal of developing the technologies needed for a second-generation \acs{EHT}. 

The \ac{ngEHT} is a \ac{MSRI} project funded by the \ac{NSF}, with the goal of developing
transformative technologies for a second-generation \ac{EHT}. A significant
component of the telescope is the software needed to properly
operate, reduce and analyze the data taken by the member telescopes.
This document defines the requirements for the refactoring of the \ac{HOPS}
as part of the work package of the \acs{MSRI} proposal. 

Broadly speaking, the refactoring of \acs{HOPS} is driven by
these overarching desires:

\begin{itemize}
\item[-] Everything currently possible in \ac{HOPS} shall remain possible.
%(We plan to validate this goal using many of the existing software tests.)

\item[-] The new \ac{HOPS} shall be easier to use than the existing \acs{HOPS}.
%(The decision to add a Python scripting layer, similar to CASA, partly addresses this.)
 
\item[-] The new \acs{HOPS} shall support the required expansion of stations, 
baselines, and bandwidth expected for the ngEHT.

\end{itemize}

The next generation \acs{EHT} is planned to include up to 30 stations
and 435 baselines, with wider bandwidth (up to 256 Gbps over four dual-polarization, 4 GHz bands, if sampled at 2-bits). 
Support for greater bit depth is also of interest should recording media be available.  The refactoring
of \ac{HOPS} shall support the full analysis of ngEHT data within these limits,
and will be made smarter, more automatic, more robust, and easier to use. The
number of channels shall have no practical limit, but shall be tested at least to 128.
%%% EDIT: if we are going beyond 2 bits, that is actually non-trivial work
%%% EDIT: and we need a requirement for that.

%Furthermore, the \acs{EHT} may elect to operate with a more frequent observing
%cadence.

For the needs of the \acs{EHT} campaigns of 2017 it was decided to augment
the existing HOPS package with some Python-based packages in order to
create a pipeline for the initial reduction of data \cite{blackburn2019eht}.
The new \ac{HOPS} shall also
support independent analyses, using Python or other languages, through
accessible data archive formats (e.g. HDF5, JSON, XML, or similar), interactive 
tools, and conversion to human-readable ASCII files. 

\acs{HOPS} is currently in the version 3.x series; the new code will
begin with the 4.x series, and we shall refer to the new codebase as HOPS4
(and the old as HOPS3). The primary development language will be C/C++, 
with a Python scripting layer to provide ease of use. Version control shall be 
provided by the MIT-hosted github. 


%The current plotting functionality,
%provided by PGPLOT, shall be replaced by Python/Matplotlib.

%In this continued development of HOPS, we shall assume
%that HOPS alone must be capable of the full analysis; but we should also
%be mindful that options to move the data to \ac{AIPS} or \ac{CASA} must at
%some level exist.

%Finally, all functionality of the current \acs{HOPS} shall be maintained, with
%backward-compatibility for earlier data formats.  

%There shall be extensive use of regression tests and demonstrated
%reproducibility of prior results.

%These requirements are described in \Sec~\ref{sec:testable}.
%Some requirements are more general and not easily testable; 
%these ``desires'' are described in \Sec~\ref{sec:desires}.

%Every requirement shall have an explicit demonstration that it has been 
%fulfilled, and the requirements specified in this document are grouped according
%to the methods we will use to verify success. 
%Requirements that shall be demonstrated with explicit software checks are 
%described in \Sec~\ref{sec:testable}.
%Requirements that are not easily verified through software tests are described
%in \Sec~\ref{sec:desires}.


This document is intended to be one in a series, with other documents
describing:
\begin{itemize}
\item Specifications and architectural design \cite{design}
\item Coverage and test plan \cite{cover}
\item The development plan \cite{develop}
\item The user manual
\item Function and class references, generated by e.g. Sphinx or Doxygen
%\item Requirements specific to geodesy
\end{itemize}
%%% EDIT: I don't plan to ever give the geodetic document to SAO.
Additional documents may be written during the course of the project.
%%% EDIT: e.g. algorithmic detail memos, &c.



%
% eof
%
