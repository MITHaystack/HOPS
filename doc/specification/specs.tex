\documentclass[notitlepage,letterpaper,pdftex,12pt,final]{article}
%\documentclass[notitlepage,letterpaper,pdftex,12pt,draft]{article}
% article < report < book ; preable material follows
%
% This file is mostly boilerplate that you can copy and tweak.
% The true material is in included files.  ../common should hold
% things that more than one document might need.  The Makefiles
% should likewise be mostly boilerplate with minor tweaks.
%

% (un)comment to (see)hide full paths to files actually used
% however, you'll need to override the TEXOPT= setting to batchmode
% made in the Makefile.
\listfiles

\addtolength\textwidth{1.7in}
\addtolength\oddsidemargin{-0.95in}
\addtolength\evensidemargin{-0.95in}
\addtolength\marginparwidth{-0.95in}
\typeout{textwidth is \the\textwidth}

% useful to block out portions of text
\usepackage{ifthen}
% to allow defining our own colors
\usepackage[dvipsnames]{xcolor}
% makes hyperlinks work
\usepackage{hyperref}

%%%% Delete me:
\newcommand{\nuHOPS}{HOPS4\xspace}

\hypersetup{colorlinks=true,linkcolor=blue,citecolor=green}
%%%% \hypersetup{colorlinks=true,linkcolor=darkblue,citecolor=darkgreen}

% for figures; insert [draft] before {...} not to see imgs
\usepackage{graphicx}
% for small figures surrounded by text
\usepackage{wrapfig}
% for control over headers and footers
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}
% for handling acronyms
\usepackage[printonlyused]{acronym}

% for bibliographies if needed
\usepackage[utf8]{inputenc}
\usepackage[english]{babel}
\usepackage[backend=biber,style=numeric,sorting=none]{biblatex}
%\usepackage[backend=bibtex,style=numeric,sorting=none]{biblatex}
\addbibresource{hops.bib}
% context-sensitive quotes
\usepackage{csquotes}
% underline for emphasis: \uline etc
\usepackage{ulem}
% for generating outlines
\usepackage{outlines}
\usepackage{enumitem}

% for bold math
\usepackage{bm}
% for serious math which we may have in a few places (eventually)
\usepackage{amsmath}
% equations include section number
\numberwithin{equation}{section}

% for marginal notations concerning geodesy
\usepackage{marginnote}

% to go back to default after \ragged commmands
\usepackage{ragged2e}

% see common/shortcuts.tex for what is defined in this file

%%%%\input{shortcuts}
%%%%\setboolean{geos}{true}% or false to hide geodetic marginal notations

% control options
\newboolean{skipappendix}
\setboolean{skipappendix}{false}

% at some point this gets frozen
\newcommand{\recdate}{\today}

\makeatletter
\newcommand\urlfootnote@[1]{\footnote{\url@{#1}}}
\DeclareRobustCommand{\urlfootnote}{\hyper@normalise\urlfootnote@}
\makeatother

\usepackage{adjustbox}

\usepackage[font=small]{caption}
\usepackage{xspace}
\usepackage{float}


\usepackage{graphicx}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{multirow}
\usepackage{subcaption}
% \usepackage{lineno}
\usepackage{listings}
\usepackage{microtype}
\usepackage{placeins}
%\usepackage[x11names]{xcolor}
\usepackage{footnote}

\usepackage[T1]{fontenc}
\usepackage[scaled]{beramono}
\newcommand\Small{\fontsize{9}{9.2}\selectfont}
\newcommand\Normal{\fontsize{12}{12.3}\selectfont}
\newcommand*\LSTfont{\Small\ttfamily\SetTracking{encoding=*}{-60}\lsstyle}
\newcommand*\LSTfontNormal{\Normal\ttfamily\SetTracking{encoding=*}{-60}\lsstyle}

\usepackage{listings}


\lstset{ %
  backgroundcolor=\color{white},   % choose the background color; you must add \usepackage{color} or \usepackage{xcolor}
  basicstyle=\LSTfont,        % the size of the fonts that are used for the code
  breakatwhitespace=false,         % sets if automatic breaks should only happen at whitespace
  breaklines=true,                 % sets automatic line breaking
  captionpos=b,                    % sets the caption-position to bottom
  commentstyle=\color{gray},    % comment style
  deletekeywords={...},            % if you want to delete keywords from the given language
  escapeinside={\%*}{*)},          % if you want to add LaTeX within your code
  extendedchars=true,              % lets you use non-ASCII characters; for 8-bits encodings only, does not work with UTF-8
  frameshape={RYR}{Y}{Y}{RYR},	                   % adds a frame around the code
  keepspaces=true,                 % keeps spaces in text, useful for keeping indentation of code (possibly needs columns=flexible)
  keywordstyle=\color{blue},       % keyword style
  language=C++,                 % the language of the code
  otherkeywords={*,...},           % if you want to add more keywords to the set
  numbers=none,                    % where to put the line-numbers; possible values are (none, left, right)
  numbersep=5pt,                   % how far the line-numbers are from the code
  numberstyle=\tiny\color{gray}, % the style that is used for the line-numbers
  rulecolor=\color{black},         % if not set, the frame-color may be changed on line-breaks within not-black text (e.g. comments (green here))
  showspaces=false,                % show spaces everywhere adding particular underscores; it overrides 'showstringspaces'
  showstringspaces=false,          % underline spaces within strings only
  showtabs=false,                  % show tabs within strings adding particular underscores
  stepnumber=2,                    % the step between two line-numbers. If it's 1, each line will be numbered
  stringstyle=\color{red},     % string literal style
  tabsize=2,	                   % sets default tabsize to 2 spaces
  title=\lstname                   % show the filename of files included with \lstinputlisting; also try caption instead of title
}


\usepackage{algorithm}
\usepackage{algpseudocode}
\renewcommand{\algorithmicrequire}{\textbf{Input:}}
\renewcommand{\algorithmicensure}{\textbf{Output:}}

\usepackage{tabularx}
\newcolumntype{L}{>{\raggedright\arraybackslash}X}


%\usepackage{tikz}
%\usepackage{pgfplots}
%\usetikzlibrary{positioning}
%\usetikzlibrary{shapes.geometric, arrows}
%\pgfplotsset{compat=1.11}
\usepackage[margin=0.9in]{geometry}

\newcommand\tikzmark[2]{%
  \tikz[remember picture,overlay]\node[arrow,draw] (#1) {#2};}


%\usepackage[printwatermark]{xwatermark}
%\newwatermark[pages=2-30,color=gray!25,angle=45,scale=5,xpos=0,ypos=0]{DRAFT}


%\usepackage{etoolbox}
%\makeatletter
%\patchcmd{\@verbatim}
%  {\verbatim@font}
%  {\verbatim@font\tiny}
%  {}{}
%\makeatother

%\usepackage{ifthen}

%\let\endtitlepage\relax


\begin{document}
\DeclareGraphicsExtensions{.png, .jpg, .pdf}
% best to put figures in subdirs
%\graphicspath{{figs/}{scans/}}

% for subsequent pages
\setlength\headheight{15pt}
\fancyhead[L]{HOPS}
\fancyhead[C]{}
\fancyhead[R]{Specifications}
\fancyfoot[R]{Page \thepage\ of\ \pageref{page:LastPage}}
\fancyfoot[L]{\recdate}

\title{ngEHT Specifications for a new HOPS}

\author{%
\LARGE John Barrett, Geoff Crew, Dan Hoak and Violet Pfeiffer \\
\Large MIT Haystack Observatory}
\date{Version 1.0, \recdate}
\maketitle
\normalsize

\renewcommand\abstractname{Executive Summary}
\abstract{%
\large
This document lays out the general architecture adopted for
this rewrite of \ac{HOPS}.  The orginal version of \ac{HOPS}
was written with a mix of C and F77 with some dependencies
that are becoming a challenge to satisfy.  The new architecture
will involve a mix of C/C++ for the lower-layers, and add a
Python layer to better support human interactions.  The new
implementation will be more modular, and easier to support
for the coming decades.
}

%   * Architecture definition
%   * Language selection
%   * Build system selection
%   * Parallel support definition
%   * Interactivity definition
%   * External package identification
%   * New objects specification
%   * New library specification
%   * New program specification





% \begingroup . . . \endgroup can be used to keep things together
% and/or an explicit page break and/or adjust spacing as needed so
% it looks presentable.  Uncomment the sections you need.
%\begingroup
%\renewcommand\contentsname{Contents}
%\renewcommand\listfigurename{Figures}
%\renewcommand\listtablename{Tables}
%\vspace{24pt}\hrule
\pagebreak
\tableofcontents
%\vspace{24pt}\hrule
%\pagebreak
%\listoffigures
%\vspace{24pt}\hrule
%\listoftables
%\vspace{24pt}\hrule
%\endgroup

% it is sometimes cleaner to start sections on new pages in a longer
% document--then changes to each section don't repage everything.
\pagebreak

\section{Introduction}

This document is intended to record the design decisions made in specifying how the HOPS re-development project undertakes the
re-design and re-implementation of the VLBI post-processing software HOPS. As this is a software project there is a certain
degree of ongoing flexibility that is needed in order to obtain an optimal result upon completion. Therefore, this 
draft document will be updated periodically along with the software as it is built out. The initial focus will be to determine
the of components of the design and their dependencies which must be in place as basic infrastructure before further development
can take place.



% break document into appropriate portions
%\input{tbd}

%\pagebreak
%\input{specs-intro}

\pagebreak
\input{architecture}
%\input{designdetails}

\pagebreak
\input{language}

\pagebreak
\input{objects}
%\input{srctree}

\pagebreak
\input{parallel}

\pagebreak
\input{externals}

\pagebreak
\input{interfaces}

\pagebreak
\input{plotting}

\pagebreak
\input{libraries}

\pagebreak
\input{legacy}



\addtocounter{section}{1}
\renewcommand{\refname}{\thesection. References}
\addcontentsline{toc}{section}{\thesection. References}
\bibstyle{plainurl}
\printbibliography
\label{sec:references}

% if skipappendix-is-true then (nothing) else typeset Appendices
\ifthenelse{\boolean{skipappendix}}{}{%

\pagebreak
\appendix

\section{Acronyms, Commands and Glossary}
%%%%\input{acronyms}

}

\label{page:LastPage}
\end{document}
