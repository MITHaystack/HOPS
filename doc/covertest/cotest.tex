\documentclass[notitlepage,letterpaper,pdftex,12pt,final]{article}
%\documentclass[notitlepage,letterpaper,pdftex,12pt,draft]{article}
% article < report < book ; preable material follows
%
% This file is mostly boilerplate that you can copy and tweak.
% The true material is in included files.  ../common should hold
% things that more than one document might need.  The Makefiles
% should likewise be mostly boilerplate with minor tweaks.
%

% (un)comment to (see)hide full paths to files actually used
% however, you'll need to override the TEXOPT= setting to batchmode
% made in the Makefile.
\listfiles

\addtolength\textwidth{1.7in}
\addtolength\oddsidemargin{-0.95in}
\addtolength\evensidemargin{-0.95in}
\addtolength\marginparwidth{-0.95in}
\typeout{textwidth is \the\textwidth}

% useful to block out portions of text
\usepackage{ifthen}
% to allow defining our own colors
\usepackage[dvipsnames]{xcolor}
% makes hyperlinks work
\usepackage{hyperref}
\hypersetup{colorlinks=true,linkcolor=darkblue,citecolor=darkgreen}
% for figures; insert [draft] before {...} not to see imgs
\usepackage{graphicx}
% for small figures surrounded by text
\usepackage{wrapfig}
% for control over headers and footers
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}
% for handling acronyms
\usepackage[printonlyused]{acronym}

% for bibliographies if needed
\usepackage[utf8]{inputenc}
\usepackage[english]{babel}
\usepackage[backend=biber,style=numeric,sorting=none]{biblatex}
\addbibresource{hops.bib}
% context-sensitive quotes
\usepackage{csquotes}
% underline for emphasis: \uline etc
\usepackage{ulem}
% for generating outlines
\usepackage{outlines}
\usepackage{enumitem}

\usepackage[printwatermark]{xwatermark}
\newwatermark[pages=1-12,color=gray!25,angle=45,scale=5,xpos=0,ypos=0]{DRAFT}

% for bold math
\usepackage{bm}
% for serious math which we may have in a few places (eventually)
\usepackage{amsmath}
% equations include section number
\numberwithin{equation}{section}

% for marginal notations concerning geodesy
\usepackage{marginnote}

% to go back to default after \ragged commmands
\usepackage{ragged2e}

% see common/shortcuts.tex for what is defined in this file
\input{shortcuts}
\setboolean{geos}{true}% or false to hide geodetic marginal notations

% control options
\newboolean{skipappendix}
\setboolean{skipappendix}{false}

% at some point this gets frozen
\newcommand{\recdate}{\today}

\begin{document}
\DeclareGraphicsExtensions{.png, .jpg, .pdf}
% best to put figures in subdirs
%\graphicspath{{figs/}{scans/}}

% for subsequent pages
\setlength\headheight{15pt}
\fancyhead[L]{HOPS}
\fancyhead[C]{}
\fancyhead[R]{Requirements}
\fancyfoot[R]{Page \thepage\ of\ \pageref{page:LastPage}}
\fancyfoot[L]{\recdate}

\title{ngEHT Coverage and Testing for a new HOPS}

\author{%
\LARGE John Barrett, Geoff Crew, Dan Hoak and Violet Pfeiffer \\
\Large MIT Haystack Observatory}
\date{Draft - Version 1.0, \recdate}
\maketitle
\normalsize

\renewcommand\abstractname{Summary}
\abstract{%
\large
This document describes the coverage and test plan for the HOPS4
redevelopment. The suite of tests is intended to provide developers
with up-to-date verification of the required HOPS functionality
across the supported platforms and distributions. It also provides
end users with build-time checks that the installation was successful.
Additionally, we use coverage tools to demonstrate that the test plan
executes a satisfactory fraction of the code, and that all required
functions and cases are exercised by the tests.

}

% \begingroup . . . \endgroup can be used to keep things together
% and/or an explicit page break and/or adjust spacing as needed so
% it looks presentable.  Uncomment the sections you need.
%\begingroup
%\renewcommand\contentsname{Contents}
%\renewcommand\listfigurename{Figures}
%\renewcommand\listtablename{Tables}
%\vspace{24pt}\hrule
\pagebreak
\tableofcontents
%\vspace{24pt}\hrule
%\pagebreak
%\listoffigures
%\vspace{24pt}\hrule
%\listoftables
%\vspace{24pt}\hrule
%\endgroup

% it is sometimes cleaner to start sections on new pages in a longer
% document--then changes to each section don't repage everything.

% break document into appropriate portions
%
% CONTENTS OF THE DOCUMENT SHOULD BE THE FOLLOWING:
% Mention goals, methods, scope, schedule, and expected results.
% What we are testing.
% Why we are testing that.
% Risk assesment and mitigations?
% Resources (i.e. hardware, software, dev tools, personnel)
% Documents that will be developed during testing (coverage report)
% 
% To do:
%   Add numbering to sections. 
%   Correctly reference requirements document.
%   Replace the data in the tables with real data.
%

% introductory thoughts %
\section{Purpose}
\label{sec:purpose}
The \ac{EHT} has launched a \ac{MSRI} project with the goal of developing
the technologies needed for a second-generation \acs{EHT}. 
This document describes the test plan for the refactoring of the \ac{HOPS}
as part of the work package of the \acs{MSRI} proposal. 

\section{Applicability}
\label{sec:applicability}
This document is applicable to the HOPS4 redevelopment effort only.

\section{Referenced and Applicable Documents}
% Mention the requirements document if necessary.
\label{sec:referenced-docs}
\begin{table}[h!]
\centering
 \begin{tabular}{c | c | c } 
 %\hline
 Title & Vers. & Date \\ [0.5ex]
 \hline%\hline
 HOPS4 Requirements & 1.0 & January 8, 2021 \\ [1ex]
 HOPS4 Specifications & 0.1 & \recdate \\
 %\hline
 \end{tabular}
 \caption{HOPS4 documents referenced by this document}
 \label{table:1}
\end{table}

\section{Resources}
\label{sec:resources}
% Personnel, hardware, software, dev tools.

%\section{Risk Assesment}
%\label{sec:risk-assessment}
% Risks to the project and how we will mitigate them.
% Hopefully we don't have to do this.

\section{Test Types and Schedule}
\label{sec:schedule}

The tests described in this document are grouped into the following categories.

\begin{itemize}
\item[] \textbf{Unit tests} are defined for discrete functions or sections of code.
\item[] \textbf{Regression tests} are automated and generate quantitative results for specific
  functions using captured data. They have pre-defined criteria for success (for example, an SNR range for a fringe fit). Many of these tests are direct comparisons to results from HOPS3,
  and are largely focused on detecting if changes break pre-existing functionality.
\item[] \textbf{Continuous integration tests} check that the latest HOPS4 codebase successfully compiles in a variety of environments and distributions.
\item[] \textbf{Benchmarking tests} are used to verify the performance of HOPS4 functions.
\item[] \textbf{Oracle tests} are direct comparisons between HOPS3 and HOPS4. They are implemented using an ``oracle'', a software package that runs HOPS3 to determine a result of interest. Then the necessary sub-set of HOPS4 code is executed on the same dataset to ensure the result is within tolerance of the oracle's result.
\item[] \textbf{Component tests} are tests of individual components (libraries) and their dependencies. These are somewhat like regression tests, but are more narrowly focused on a sub-set of code. They are designed such that they do not rely on any dependencies beyond what is needed by the component under test. 
\item[] \textbf{Manual tests} are tests that require human interpretation of results, for example to verify that a plot is generated with the proper formatting, or that a GUI is functioning as expected.

\end{itemize}

These tests are executed on different schedules.

\begin{table}[h!]
\centering
 \begin{tabular}{c | c} 
 %\hline
 Test type & Frequency \\ [0.5ex] 
 \hline%\hline
 Regression &  Per commit \\ 
 Continuous Integration & Daily \\
 Unit testing & Per Class/Function \\ 
 Benchmarking & As needed \\
 Oracle  & As needed \\
 Component & As needed \\ 
 Manual & As needed \\ [1ex]
 %\hline
 \end{tabular}
 \caption{Types of testing planned for HOPS4}
 \label{table:2}
\end{table}


\section{Reports}
\label{sec:reports}
Tests will generate reports, which are human-readable documents that 
summarize the success and failure of the tests at various stages
(commit, build, weekly, etc). 


\section{Scope}
\label{sec:scope}
% What will and will not be tested.
The scope of this test plan does not include \ac{HOPS} 3. This test plan will test
all new functionality, libraries, other dependencies, features, and refactoring involved in
\ac{HOPS}. We will also use specific algorithm verification tests, using \ac{HOPS} 3 as a test
oracle, and regression tests with captive 2017/2018 data scans.

%\pagebreak
%\section{Testing Methods}
%\label{sec:testing-methods}
% Mention that we use Agile so this is our schedule and they need to deal with it.

\input{regress}
% Test that data with both HOPS4 and HOPS3 return the same results.

%\pagebreak
\input{integration}
% Handled by Travis CI or something similar. 

%\pagebreak
\input{unit}
% Mention testing suite(s) we are using.

%\pagebreak
\input{benchmark}
% Mention benchmark tool.

%\pagebreak
\input{oracle}

%\pagebreak
\input{component}
% Test libraries and such.

%\pagebreak
\input{manual}
%i.e. Geoff tests HOPS 4 by running it as a user would.

%\pagebreak
\input{reports}


\addtocounter{section}{1}
\renewcommand{\refname}{\thesection. References}
\addcontentsline{toc}{section}{\thesection. References}
\bibstyle{plainurl}
\printbibliography
\label{sec:references}

% if skipappendix-is-true then (nothing) else typeset Appendices
\ifthenelse{\boolean{skipappendix}}{}{%

\pagebreak
\appendix
\section{Acronyms, Commands and Glossary}
\input{acronyms}

}

\label{page:LastPage}
\end{document}
