<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>fourfit &mdash; HOPS 4.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=5bd962b8" />

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=9f5556dd"></script>
        <script src="../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="alist" href="alist.html" />
    <link rel="prev" title="HOPS3 Applications and Libraries" href="../hops3.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            HOPS
              <img src="../../_static/hops_logo_b_small-scaled.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../compiling.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hops4/hops4.html">HOPS4</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../hops3.html">HOPS3</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">fourfit</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#synopsis">SYNOPSIS</a></li>
<li class="toctree-l3"><a class="reference internal" href="#syntax">SYNTAX</a></li>
<li class="toctree-l3"><a class="reference internal" href="#examples">EXAMPLES</a></li>
<li class="toctree-l3"><a class="reference internal" href="#option-flags">OPTION FLAGS</a></li>
<li class="toctree-l3"><a class="reference internal" href="#arguments">ARGUMENTS</a></li>
<li class="toctree-l3"><a class="reference internal" href="#environment">ENVIRONMENT</a></li>
<li class="toctree-l3"><a class="reference internal" href="#description">DESCRIPTION</a></li>
<li class="toctree-l3"><a class="reference internal" href="#selector-keywords">SELECTOR KEYWORDS</a></li>
<li class="toctree-l3"><a class="reference internal" href="#syntactic-keywords">SYNTACTIC KEYWORDS</a></li>
<li class="toctree-l3"><a class="reference internal" href="#control-action-keywords">CONTROL ACTION KEYWORDS</a></li>
<li class="toctree-l3"><a class="reference internal" href="#deprecated">DEPRECATED</a></li>
<li class="toctree-l3"><a class="reference internal" href="#keyword-semantics">KEYWORD SEMANTICS</a></li>
<li class="toctree-l3"><a class="reference internal" href="#special-keyword-values">SPECIAL KEYWORD VALUES</a></li>
<li class="toctree-l3"><a class="reference internal" href="#special-formats">SPECIAL FORMATS</a></li>
<li class="toctree-l3"><a class="reference internal" href="#general-guidelines">GENERAL GUIDELINES</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="alist.html">alist</a></li>
<li class="toctree-l2"><a class="reference internal" href="aedit.html">aedit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/afio.html">afio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/dfio.html">dfio - Mark4 Correlator I/O types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/mk4util.html">mk4util</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/msg.html">msg</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../authors.html">Authors</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">HOPS</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../hops3.html">HOPS3 Applications and Libraries</a></li>
      <li class="breadcrumb-item active">fourfit</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/hops3/applications/fourfit.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="fourfit">
<h1>fourfit<a class="headerlink" href="#fourfit" title="Link to this heading"></a></h1>
<section id="synopsis">
<h2>SYNOPSIS<a class="headerlink" href="#synopsis" title="Link to this heading"></a></h2>
<p>Performs fringe searching for continuum MkIV data</p>
</section>
<section id="syntax">
<h2>SYNTAX<a class="headerlink" href="#syntax" title="Link to this heading"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fourfit</span> <span class="p">[</span><span class="o">-</span><span class="n">a</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">b</span> <span class="n">BB</span><span class="p">:</span><span class="n">F</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">c</span> <span class="n">controlfile</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">d</span> <span class="n">display</span> <span class="n">device</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">e</span><span class="p">]</span>
          <span class="p">[</span><span class="o">-</span><span class="n">f</span> <span class="n">value</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">m</span> <span class="n">value</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">n</span> <span class="n">value</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">p</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">r</span> <span class="n">afile</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">s</span> <span class="n">naps</span><span class="p">]</span>
          <span class="p">[</span><span class="o">-</span><span class="n">tux</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">P</span> <span class="n">polar_pair</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">T</span> <span class="n">trefoffs</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">X</span><span class="p">]</span> <span class="n">data</span> <span class="n">file</span> <span class="nb">list</span>
          <span class="p">[</span><span class="nb">set</span> <span class="o">&lt;</span><span class="n">control</span> <span class="n">file</span> <span class="n">syntax</span> <span class="n">statements</span><span class="o">&gt;</span><span class="p">]</span>
       <span class="n">Where</span> <span class="nb">all</span> <span class="n">arguments</span> <span class="k">except</span> <span class="n">the</span> <span class="n">data</span> <span class="n">file</span> <span class="nb">list</span> <span class="n">are</span> <span class="n">optional</span><span class="o">.</span>
       <span class="n">The</span> <span class="p">[</span><span class="o">-</span><span class="n">r</span> <span class="n">afile</span><span class="p">]</span> <span class="n">option</span> <span class="n">replaces</span> <span class="n">the</span> <span class="n">data</span> <span class="n">file</span> <span class="nb">list</span><span class="p">,</span> <span class="n">however</span><span class="o">.</span>
       <span class="n">The</span> <span class="s2">&quot;set&quot;</span> <span class="n">argument</span> <span class="ow">and</span> <span class="n">the</span> <span class="n">commands</span> <span class="n">which</span> <span class="n">follow</span> <span class="n">it</span> <span class="n">must</span>
       <span class="n">come</span> <span class="n">last</span><span class="o">.</span>  <span class="n">All</span> <span class="n">option</span> <span class="n">flags</span> <span class="n">must</span> <span class="n">appear</span> <span class="n">before</span> <span class="n">the</span> <span class="n">data</span> <span class="n">file</span>
       <span class="nb">list</span><span class="o">.</span>  <span class="n">Option</span> <span class="n">flags</span> <span class="n">can</span> <span class="n">come</span> <span class="ow">in</span> <span class="nb">any</span> <span class="n">order</span><span class="o">.</span>
</pre></div>
</div>
</section>
<section id="examples">
<h2>EXAMPLES<a class="headerlink" href="#examples" title="Link to this heading"></a></h2>
<blockquote>
<div><p>Here are examples of command-line invocations of fourfit, with
an explanation of what they do:</p>
</div></blockquote>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fourfit</span> <span class="o">-</span><span class="n">pt</span> <span class="o">-</span><span class="n">c</span> <span class="n">control</span> <span class="mi">101</span><span class="o">-</span><span class="mi">0620</span><span class="o">/</span><span class="mi">3</span><span class="n">C279</span><span class="mf">.051</span><span class="n">V4B</span>

      <span class="n">Test</span> <span class="n">mode</span><span class="p">,</span> <span class="n">steps</span> <span class="n">through</span> <span class="nb">all</span> <span class="n">baselines</span> <span class="n">polarizations</span> <span class="k">for</span>
      <span class="n">this</span> <span class="n">scan</span><span class="o">.</span>  <span class="n">Without</span> <span class="n">the</span> <span class="o">-</span><span class="n">pt</span><span class="p">,</span> <span class="n">the</span> <span class="n">fringes</span> <span class="n">would</span> <span class="n">just</span> <span class="n">be</span>
      <span class="n">written</span> <span class="ow">in</span> <span class="n">individual</span> <span class="n">files</span> <span class="ow">in</span> <span class="mi">101</span><span class="o">-</span><span class="mi">0620</span><span class="p">,</span> <span class="k">with</span> <span class="n">one</span> <span class="n">file</span>
      <span class="n">per</span> <span class="n">baseline</span><span class="o">-</span><span class="n">pol</span><span class="o">-</span><span class="n">frequencygroup</span> <span class="nb">type</span><span class="o">.</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fourfit</span> <span class="o">-</span><span class="n">txas</span> <span class="o">-</span><span class="n">m</span> <span class="mi">1</span> <span class="o">-</span><span class="n">c</span> <span class="n">control</span> <span class="mi">018</span><span class="o">-</span><span class="mi">234505</span> <span class="nb">set</span> <span class="n">mb_win</span> <span class="o">-</span><span class="mf">0.0034</span> <span class="mf">.004</span> <span class="n">freqs</span> <span class="n">a</span> <span class="n">b</span>

      <span class="n">Test</span> <span class="n">mode</span><span class="p">,</span> <span class="n">xwindow</span> <span class="n">display</span><span class="p">,</span> <span class="n">accounting</span> <span class="n">switched</span> <span class="n">on</span><span class="p">,</span> <span class="n">cross</span>
      <span class="n">power</span> <span class="n">spectrum</span> <span class="n">plot</span> <span class="n">switched</span> <span class="n">on</span><span class="p">,</span> <span class="n">moderately</span> <span class="n">verbose</span><span class="p">,</span> <span class="n">use</span>
      <span class="n">control</span> <span class="n">file</span> <span class="n">named</span> <span class="s2">&quot;control&quot;</span> <span class="ow">in</span> <span class="n">current</span> <span class="n">working</span> <span class="n">directory</span><span class="p">,</span>
      <span class="n">process</span> <span class="nb">all</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">scan</span> <span class="n">directory</span> <span class="mi">018</span><span class="o">-</span><span class="mi">234505</span><span class="p">,</span> <span class="n">override</span>
      <span class="n">multiband</span> <span class="n">delay</span> <span class="n">search</span> <span class="n">window</span> <span class="ow">and</span> <span class="n">select</span> <span class="n">channels</span> <span class="s1">&#39;a&#39;</span> <span class="ow">and</span>
      <span class="s1">&#39;b&#39;</span> <span class="n">only</span><span class="o">.</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fourfit</span> <span class="o">-</span><span class="n">r</span> <span class="n">refr_list</span> <span class="o">-</span><span class="n">c</span> <span class="n">control</span> <span class="o">-</span><span class="n">d</span> <span class="n">hardcopy</span> <span class="o">-</span><span class="n">b</span> <span class="n">AT</span><span class="p">:</span><span class="n">S</span>

      <span class="n">Process</span> <span class="nb">all</span> <span class="n">data</span> <span class="n">referenced</span> <span class="n">by</span> <span class="nb">type</span> <span class="mi">2</span> <span class="n">lines</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">A</span><span class="o">-</span><span class="n">file</span>
      <span class="n">named</span> <span class="s2">&quot;refr_list&quot;</span><span class="p">,</span> <span class="n">use</span> <span class="n">control</span> <span class="n">file</span> <span class="s2">&quot;control&quot;</span><span class="p">,</span> <span class="nb">print</span> <span class="n">the</span>
      <span class="n">fringe</span> <span class="n">plot</span> <span class="n">on</span> <span class="n">the</span> <span class="n">default</span> <span class="n">printer</span><span class="p">,</span> <span class="n">process</span> <span class="n">only</span> <span class="n">baseline</span>
      <span class="n">AT</span> <span class="n">frequency</span> <span class="n">subgroup</span> <span class="n">S</span><span class="o">.</span>
</pre></div>
</div>
</section>
<section id="option-flags">
<h2>OPTION FLAGS<a class="headerlink" href="#option-flags" title="Link to this heading"></a></h2>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">-a</span></code></dt><dd><p>If specified, this option switches on accounting
of CPU time and wall-clock time used in the various
parts of fourfit.  When the program finishes, it
produces a summary of these timing statistics.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-b</span> <span class="pre">BB:F</span></code></dt><dd><p>Allows the user to override the control file
with a specification of the baseline and/or
frequency group to be processed.  The syntax is
flexible.  0, 1 or 2 characters before the colon
refer to the baseline (one character is interpreted
as a station), and 0 or 1 character after the colon
is interpreted as the frequency subgroup.  You can
use the control file wildcard character ‘?’ in
the baseline, but remember to protect it from the
C-shell either by escaping it with a backslash ‘'
or enclosing the entire -b argument in single
quotes.  If you wish only to specify the baseline,
the colon may be omitted.  An error in the -b
flag argument causes the flag to be ignored, and
fourfit will continue execution.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-c</span> <span class="pre">controlfile</span></code></dt><dd><p>Specifies the file which contains parameters
to control the operation of the program.  If
absent, fourfit will use only the file pointed to
by the environment variable DEF_CONTROL, which
in turn defaults to $FF/cf_default as defined
in the $HOPS/setup.csh file.  Any parameters
set in a control file specified with the -c option
override the default file values.  A description
of the syntax of the control file, with an example,
can be found later in this document.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-d</span> <span class="pre">display_device</span></code></dt><dd><p>Upon completion of a fringe fit, fourfit can
optionally display the results using postscript.
The valid choices for “display_device” are:
<code class="docutils literal notranslate"><span class="pre">diskfile:file.ps</span></code>  save the plot in “file.ps”
<code class="docutils literal notranslate"><span class="pre">hardcopy</span></code>          send the plot directly to lpr
<code class="docutils literal notranslate"><span class="pre">pshardcopy</span></code>        print the plot via pplot_print
<code class="docutils literal notranslate"><span class="pre">xwindow</span></code>           show the plot in an X11 window
<code class="docutils literal notranslate"><span class="pre">psscreen</span></code>          the same, but allow GS_* options</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-e</span></code></dt><dd><p>If specified, this option estimates the time required for
processing by fringing the first scan and extrapolating to
the remaining scans.  It is equivalent to -a -t with no
display device, followed by some estimation.  Only the
first data file mentioned will be included in the estimate.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-f</span> <span class="pre">first</span> <span class="pre">channel</span></code></dt><dd><p>overrides the default first channel (0) to facilitate
plotting when there are more than 16 channels (see -n)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-m</span> <span class="pre">value</span></code></dt><dd><p>This flag controls the verbosity of the program via
the integer argument “value”, which typically ranges from 3
(virtually silent except for major errors) to -3
(incredibly verbose, of use only to the authors of
the program).  The default is 2. An additional mode can
be toggled on when m=4. This mode prints nothing except
the name of the generated fringe file, which can be useful
when calling fourfit from other scripts.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-n</span> <span class="pre">number</span> <span class="pre">of</span> <span class="pre">channels</span></code></dt><dd><p>When channels are overridden (see also the -f flag)
this tells how many channels to put on the plot. Note
that neither -f nor -n affect the actual fringe fit,
just the plotting thereof.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-p</span></code></dt><dd><p>This is equivalent to “-d psscreen”.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-r</span> <span class="pre">afile</span></code></dt><dd><p>Puts fourfit into “refringe” mode.  Fourfit refringing
is driven by an A-file input, which overrides any
correlator root files directly specified on the command
line (i.e. the latter are ignored when the -r flag
is specified).  The input A-file, of which there can
be only one, may contain root, corel or fringe lines,
but only the fringe lines are used to determine which
data to process, by baseline and frequency subgroup.
Obviously, the -r flag is inconsistent with the -u
flag, and specifying both is an error.  Note that for
afiles using HP-1000 (version 1) line formats, fourfit
has to pre-check the disk for the existence of the
type 2 files.  The data area is controlled by the
DATADIR environment variable.  It defaults to the
value of $CORDATA.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-s</span> <span class="pre">naps</span></code></dt><dd><p>This parameter controls how many AP’s are merged
together into each plotting segment. Thus the number
of time points shown in the phase, amplitude, and
validity plots is so controlled. Additionally, the
ph/seg and amp/seg statistics are calculated based
upon the stated number of AP’s in each segment.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-t</span></code></dt><dd><p>This flag places fourfit in test mode.  Everything
works as normal, except that the output file is not
written to disk, and the root file is not updated.
This is useful when experimenting with different
fringe-fitting strategies, in order to avoid cluttering
up the disk.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-u</span></code></dt><dd><p>Normally, fourfit processes all data consistent with
the data file list and the control information.  When
this flag is specified, fourfit will also check the
information in the type-2100 record of the root to
see if the data have already been processed by fourfit.
If so, the data in question are skipped.  The “u”
stands for update mode.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-x</span></code></dt><dd><p>This is equivalent to “-d xwindow”.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-P</span> <span class="pre">pp</span></code></dt><dd><p>Controls polarization processing, where the 2 character
string pp is one of four cross-polarization
states: LL, RR, LR, or RL.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-T</span> <span class="pre">trefoffs</span></code></dt><dd><p>If this option is invoked, the fourfit reference
time will be calculated by taking the nominal scan
start time from the ovex file and adding trefoffs
(which is an integer # of seconds) to it.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-X</span></code></dt><dd><p>Forces fourfit to write cross-power spectra into
type 230 records. This option is typically used for
import into AIPS.</p>
</dd>
</dl>
</section>
<section id="arguments">
<h2>ARGUMENTS<a class="headerlink" href="#arguments" title="Link to this heading"></a></h2>
<blockquote>
<div><dl>
<dt>data file list</dt><dd><blockquote>
<div><p>This mandatory argument or arguments tells fourfit
which data files to process.  The format of the data
file specification is the standard one for all MkIV
software.  You may specify individual filenames,
scan directories which contain data files,
experiment directories, or any combination of
these three.  In the latter two cases,
fourfit will descend the directory tree looking for
data files to add to its internal list of files to
process.  Only root files need be specified.  The
data files actually fringe-searched are determined
by the combination of the root files specified and the
restrictions imposed by the control file or control
parameter list (see below).  In the absence of
such restrictions, all data associated with the
specified root files are processed.</p>
<p>Beware of trying to specify too many files or scan
directories, as it is possible to overflow the Unix
argument list buffer on large experiments.  In such
cases, specify the experiment directory instead.</p>
</div></blockquote>
<p>The postscript rendering is performed by ghostscript
[gs(1)], and GS_* environment variables can be used
to produce a variety of graphics when the “psscreen”
(see -d above).  For example,</p>
<p>GS_OPTIONS=-sOutputFile=abc.png GS_DEVICE=png16 fourfit …</p>
<p>will generate a 16-color PNG plot.</p>
<dl class="simple">
<dt>set &lt;control file syntax statements&gt;</dt><dd><p>This command line argument is optional, and
is intended to permit rapid, temporary modification
of ‘fourfit’ behaviour without the need to edit the
control file.  The word “set” tells fourfit to expect
additional control information on the rest of the
command line.  The syntax of this control information
is identical to that of the control file (see
detailed description below).  The control file
parser will detect syntax errors and abort if you
do not follow the rules as laid down.  The control
information you specify after the “set” argument
on the command line applies to all data to be
processed, and overrides whatever the control file
itself specified for the parameters in question.</p>
</dd>
</dl>
</dd>
</dl>
</div></blockquote>
</section>
<section id="environment">
<h2>ENVIRONMENT<a class="headerlink" href="#environment" title="Link to this heading"></a></h2>
<p>DEF_CONTROL, DISPLAY, DATADIR, GS_DEVICE, GS_OPTIONS</p>
</section>
<section id="description">
<h2>DESCRIPTION<a class="headerlink" href="#description" title="Link to this heading"></a></h2>
<p>Fourfit is the functional analogue of FRNGE on the HP-1000 systems, and
searches the data represented by the root and corel files for fringes,
writing the results of the search to files of type fringe.  The emphasis
in the design of the program has been speed and flexibility, particularly
with regard to future enhancements.  Algorithmically, the program is
closely modelled on FRNGE, with only minor enhancements as yet, based on
the availablity of greater computing resources.</p>
<p>Below is a preliminary form of a document describing in detail the format and
syntax of the control file:</p>
<ul class="simple">
<li><p>Example of current syntax for fourfit control file</p></li>
<li><p>This file makes no semantic sense for a real experiment; rather, it is used</p></li>
<li><p>to illustrate typical command syntaxes.</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ref_freq<span class="w">  </span><span class="m">8213</span>.15<span class="w">                 </span>*<span class="w"> </span>global<span class="w"> </span>commands<span class="w"> </span>come<span class="w"> </span>first
start<span class="w"> </span>-10

<span class="k">if</span><span class="w"> </span>station<span class="w"> </span>L<span class="w"> </span>and<span class="w"> </span>f_group<span class="w"> </span>X
<span class="w">   </span>freqs<span class="w"> </span>a+<span class="w"> </span>b<span class="w"> </span>c<span class="w"> </span>d-<span class="w"> </span>e<span class="w"> </span>f<span class="w"> </span>g<span class="w"> </span>h
<span class="w">   </span>pc_phases<span class="w"> </span>abcdefgh<span class="w"> </span><span class="m">5</span><span class="w"> </span>-11<span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="m">38</span><span class="w"> </span>-56<span class="w"> </span><span class="m">13</span>.2<span class="w"> </span><span class="m">11</span><span class="w"> </span>-29
<span class="w">   </span>pc_mode<span class="w"> </span>ap_by_ap
<span class="w">   </span>pc_freqs<span class="w"> </span>abcdefgh<span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">1010</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">1010</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">1010</span><span class="w"> </span><span class="m">1010</span>

<span class="k">if</span><span class="w"> </span>station<span class="w"> </span>L<span class="w"> </span>and<span class="w"> </span>f_group<span class="w"> </span>S
<span class="w">   </span>pc_phases<span class="w"> </span>ijkmn<span class="w"> </span><span class="m">4</span>.5<span class="w"> </span>-78<span class="w"> </span><span class="m">39</span><span class="w"> </span>+12<span class="w"> </span><span class="m">0</span>
<span class="w">   </span>pc_mode<span class="w"> </span>normal

<span class="k">if</span><span class="w"> </span>station<span class="w"> </span>A
<span class="w">   </span>pc_mode<span class="w"> </span>multitone
<span class="w">   </span>pc_period<span class="w"> </span><span class="m">30</span>
<span class="w">   </span>pc_tonemask<span class="w"> </span>abcdefgh<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">8</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="m">0</span>
<span class="w">   </span>pc_phases_l<span class="w"> </span>abcdefgh<span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="m">13</span><span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="m">24</span><span class="w"> </span>-6<span class="w"> </span><span class="m">38</span><span class="w"> </span><span class="m">110</span>
<span class="w">   </span>pc_phases_r<span class="w"> </span>abcdefgh<span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">29</span><span class="w"> </span><span class="m">14</span><span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">64</span><span class="w"> </span>-2<span class="w"> </span><span class="m">44</span><span class="w"> </span><span class="m">132</span>
<span class="w">   </span>samplers<span class="w"> </span><span class="m">2</span><span class="w"> </span>abcd<span class="w"> </span>efgh
<span class="w">   </span>pc_delay_l<span class="w"> </span><span class="m">30</span>.2
<span class="w">   </span>pc_delay_r<span class="w"> </span>-5.9
<span class="w">   </span>ionosphere<span class="w"> </span><span class="m">18</span>.0

<span class="k">if</span><span class="w"> </span><span class="o">(</span>station<span class="w"> </span>V<span class="w"> </span>or<span class="w"> </span>baseline<span class="w"> </span>KT<span class="o">)</span><span class="w"> </span>and<span class="w"> </span><span class="nb">source</span><span class="w"> </span>3C279<span class="w">       </span>*<span class="w"> </span>parentheses<span class="w"> </span>NYI
<span class="w">   </span>sb_win<span class="w"> </span>-0.5<span class="w"> </span><span class="m">0</span>.5<span class="w">    </span>mb_win<span class="w"> </span><span class="m">0</span>.02<span class="w"> </span><span class="m">0</span>.02<span class="w">  </span>dr_win<span class="w"> </span>-1.0E-6<span class="w"> </span><span class="m">0</span>.5E-6

<span class="k">else</span>
<span class="w">   </span>sb_win<span class="w"> </span><span class="m">0</span>.0<span class="w"> </span><span class="m">0</span>.0<span class="w">     </span>mb_win<span class="w"> </span><span class="m">0</span>.02<span class="w"> </span><span class="m">0</span>.02<span class="w">  </span>dr_win<span class="w"> </span>-1.0E-6<span class="w"> </span><span class="m">0</span>.5E-6

<span class="k">if</span><span class="w"> </span>scan<span class="w"> </span><span class="m">288</span>-210210
<span class="w">   </span>sb_win<span class="w"> </span>.37<span class="w"> </span>.37

<span class="k">if</span><span class="w"> </span>scan<span class="w"> </span>&gt;<span class="w"> </span><span class="m">289</span>-132510
<span class="w">   </span>skip<span class="w"> </span><span class="nb">true</span>

<span class="k">if</span><span class="w"> </span>baseline<span class="w"> </span>K?<span class="w"> </span>and<span class="w"> </span>not<span class="w"> </span>scan<span class="w"> </span><span class="m">250</span>-120000<span class="w"> </span>to<span class="w"> </span><span class="m">251</span>-235959
<span class="w">   </span>switched<span class="w"> </span>scan_start
<span class="w">   </span>period<span class="w"> </span><span class="m">30</span>
<span class="w">   </span>gates<span class="w"> </span>abcfgh<span class="w">  </span><span class="m">0</span><span class="w"> </span><span class="m">30</span><span class="w">  </span><span class="m">0</span><span class="w"> </span><span class="m">10</span><span class="w">  </span><span class="m">15</span><span class="w"> </span><span class="m">25</span><span class="w">     </span><span class="m">0</span><span class="w"> </span><span class="m">10</span><span class="w">  </span><span class="m">15</span><span class="w"> </span><span class="m">25</span><span class="w">  </span><span class="m">0</span><span class="w"> </span><span class="m">30</span>


*<span class="w"> </span>End<span class="w"> </span>of<span class="w"> </span>sample<span class="w"> </span>control<span class="w"> </span>file
</pre></div>
</div>
</section>
<section id="selector-keywords">
<h2>SELECTOR KEYWORDS<a class="headerlink" href="#selector-keywords" title="Link to this heading"></a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>KEYWORD</p></th>
<th class="head"><p>VALUES</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>station</p></td>
<td><p>1 character</p></td>
</tr>
<tr class="row-odd"><td><p>baseline</p></td>
<td><p>2 characters</p></td>
</tr>
<tr class="row-even"><td><p>source</p></td>
<td><p>string of 1–8 chars</p></td>
</tr>
<tr class="row-odd"><td><p>f_group</p></td>
<td><p>1 character</p></td>
</tr>
<tr class="row-even"><td><p>scan</p></td>
<td><p>UT-epoch (special format), or:</p>
<ul class="simple">
<li><p>&lt; UT-epoch</p></li>
<li><p>&gt; UT-epoch</p></li>
<li><p>UT-epoch1 to UT-epoch2 (inclusive time range)</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="syntactic-keywords">
<h2>SYNTACTIC KEYWORDS<a class="headerlink" href="#syntactic-keywords" title="Link to this heading"></a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>KEYWORDS</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>if</p></td>
</tr>
<tr class="row-odd"><td><p>else (NYI)</p></td>
</tr>
<tr class="row-even"><td><p>and</p></td>
</tr>
<tr class="row-odd"><td><p>or</p></td>
</tr>
<tr class="row-even"><td><p>not</p></td>
</tr>
<tr class="row-odd"><td><p>() (NYI)</p></td>
</tr>
<tr class="row-even"><td><p>&lt;&gt;</p></td>
</tr>
<tr class="row-odd"><td><p>to</p></td>
</tr>
<tr class="row-even"><td><p>?</p></td>
</tr>
</tbody>
</table>
</section>
<section id="control-action-keywords">
<h2>CONTROL ACTION KEYWORDS<a class="headerlink" href="#control-action-keywords" title="Link to this heading"></a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>ACTION KEYWORDS</p></th>
<th class="head"><p>VALUES</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>adhoc_amp</p></td>
<td><p>float</p></td>
</tr>
<tr class="row-odd"><td><p>adhoc_file</p></td>
<td><p>string</p></td>
</tr>
<tr class="row-even"><td><p>adhoc_file_chans</p></td>
<td><p>string</p></td>
</tr>
<tr class="row-odd"><td><p>adhoc_flag_file</p></td>
<td><p>string</p></td>
</tr>
<tr class="row-even"><td><p>adhoc_period</p></td>
<td><p>float</p></td>
</tr>
<tr class="row-odd"><td><p>adhoc_phase</p></td>
<td><p>‘sinewave’, ‘polynomial’, or ‘file’</p></td>
</tr>
<tr class="row-even"><td><p>adhoc_poly</p></td>
<td><p>&lt;7 floats/integers (mixture OK)</p></td>
</tr>
<tr class="row-odd"><td><p>adhoc_tref</p></td>
<td><p>float</p></td>
</tr>
<tr class="row-even"><td><p>chan_ids</p></td>
<td><p>n char string, followed by n floats</p></td>
</tr>
<tr class="row-odd"><td><p>dc_block</p></td>
<td><p>‘true’ or ‘false’ (default: false)</p></td>
</tr>
<tr class="row-even"><td><p>dec_offset</p></td>
<td><p>float</p></td>
</tr>
<tr class="row-odd"><td><p>delay_offs</p></td>
<td><p>n char string, followed by n floats</p></td>
</tr>
<tr class="row-even"><td><p>delay_offs_l</p></td>
<td><p>n char string, followed by n floats</p></td>
</tr>
<tr class="row-odd"><td><p>delay_offs_r</p></td>
<td><p>n char string, followed by n floats</p></td>
</tr>
<tr class="row-even"><td><p>delay_offs_x</p></td>
<td><p>n char string, followed by n floats</p></td>
</tr>
<tr class="row-odd"><td><p>delay_offs_y</p></td>
<td><p>n char string, followed by n floats</p></td>
</tr>
<tr class="row-even"><td><p>dr_win</p></td>
<td><p>2 floats</p></td>
</tr>
<tr class="row-odd"><td><p>est_pc_manual</p></td>
<td><p>int</p></td>
</tr>
<tr class="row-even"><td><p>fmatch_bw_pct</p></td>
<td><p>float</p></td>
</tr>
<tr class="row-odd"><td><p>freqs</p></td>
<td><p>n chars</p></td>
</tr>
<tr class="row-even"><td><p>gates</p></td>
<td><p>n char string, followed by 2n floats</p></td>
</tr>
<tr class="row-odd"><td><p>gen_cf_record</p></td>
<td><p>‘true’ or ‘false’ (default: false)</p></td>
</tr>
<tr class="row-even"><td><p>index</p></td>
<td><p>n ints</p></td>
</tr>
<tr class="row-odd"><td><p>interpolator</p></td>
<td><p>‘iterate’ or ‘simul’ (default: iterate)</p></td>
</tr>
<tr class="row-even"><td><p>ionosphere</p></td>
<td><p>float</p></td>
</tr>
<tr class="row-odd"><td><p>ion_npts</p></td>
<td><p>int</p></td>
</tr>
<tr class="row-even"><td><p>ion_smooth</p></td>
<td><p>‘true’ or ‘false’ (default: false)</p></td>
</tr>
<tr class="row-odd"><td><p>ion_win</p></td>
<td><p>2 floats</p></td>
</tr>
<tr class="row-even"><td><p>lsb_offset</p></td>
<td><p>float</p></td>
</tr>
<tr class="row-odd"><td><p>mb_win</p></td>
<td><p>2 floats</p></td>
</tr>
<tr class="row-even"><td><p>mbd_anchor</p></td>
<td><p>‘sbd’ or ‘model’ (default: model)</p></td>
</tr>
<tr class="row-odd"><td><p>min_weight</p></td>
<td><p>float</p></td>
</tr>
<tr class="row-even"><td><p>notches</p></td>
<td><p>2n floats</p></td>
</tr>
<tr class="row-odd"><td><p>optimize_closure</p></td>
<td><p>‘true’ or ‘false’ (default: false)</p></td>
</tr>
<tr class="row-even"><td><p>passband</p></td>
<td><p>2 floats</p></td>
</tr>
<tr class="row-odd"><td><p>pc_amp_hcode</p></td>
<td><p>float</p></td>
</tr>
<tr class="row-even"><td><p>pc_delay_l</p></td>
<td><p>float</p></td>
</tr>
<tr class="row-odd"><td><p>pc_delay_r</p></td>
<td><p>float</p></td>
</tr>
<tr class="row-even"><td><p>pc_delay_x</p></td>
<td><p>float</p></td>
</tr>
<tr class="row-odd"><td><p>pc_delay_y</p></td>
<td><p>float</p></td>
</tr>
<tr class="row-even"><td><p>pc_phase_offset_l</p></td>
<td><p>float</p></td>
</tr>
<tr class="row-odd"><td><p>pc_phase_offset_r</p></td>
<td><p>float</p></td>
</tr>
<tr class="row-even"><td><p>pc_phase_offset_x</p></td>
<td><p>float</p></td>
</tr>
<tr class="row-odd"><td><p>pc_phase_offset_y</p></td>
<td><p>float</p></td>
</tr>
<tr class="row-even"><td><p>pc_phases</p></td>
<td><p>n char string, followed by n floats</p></td>
</tr>
<tr class="row-odd"><td><p>pc_phases_l</p></td>
<td><p>n char string, followed by n floats</p></td>
</tr>
<tr class="row-even"><td><p>pc_phases_r</p></td>
<td><p>n char string, followed by n floats</p></td>
</tr>
<tr class="row-odd"><td><p>pc_phases_x</p></td>
<td><p>n char string, followed by n floats</p></td>
</tr>
<tr class="row-even"><td><p>pc_phases_y</p></td>
<td><p>n char string, followed by n floats</p></td>
</tr>
<tr class="row-odd"><td><p>pc_freqs</p></td>
<td><p>n char string, followed by n floats</p></td>
</tr>
<tr class="row-even"><td><p>pc_mode</p></td>
<td><p>‘normal’, ‘ap_by_ap’, ‘manual’, or ‘multitone’</p></td>
</tr>
<tr class="row-odd"><td><p>pc_period</p></td>
<td><p>int</p></td>
</tr>
<tr class="row-even"><td><p>pc_tonemask</p></td>
<td><p>n char string, followed by n floats</p></td>
</tr>
<tr class="row-odd"><td><p>period</p></td>
<td><p>int</p></td>
</tr>
<tr class="row-even"><td><p>plot_data_dir</p></td>
<td><p>string</p></td>
</tr>
<tr class="row-odd"><td><p>ra_offset</p></td>
<td><p>float</p></td>
</tr>
<tr class="row-even"><td><p>ref_freq</p></td>
<td><p>float</p></td>
</tr>
<tr class="row-odd"><td><p>samplers</p></td>
<td><p>int, followed by up to 8 strings</p></td>
</tr>
<tr class="row-even"><td><p>sampler_delay_l</p></td>
<td><p>up to 8 floats</p></td>
</tr>
<tr class="row-odd"><td><p>sampler_delay_r</p></td>
<td><p>up to 8 floats</p></td>
</tr>
<tr class="row-even"><td><p>sampler_delay_x</p></td>
<td><p>up to 8 floats</p></td>
</tr>
<tr class="row-odd"><td><p>sampler_delay_y</p></td>
<td><p>up to 8 floats</p></td>
</tr>
<tr class="row-even"><td><p>sb_win</p></td>
<td><p>2 floats</p></td>
</tr>
<tr class="row-odd"><td><p>skip</p></td>
<td><p>‘true’ or ‘false’</p></td>
</tr>
<tr class="row-even"><td><p>start</p></td>
<td><p>integer</p></td>
</tr>
<tr class="row-odd"><td><p>station_delay</p></td>
<td><p>float</p></td>
</tr>
<tr class="row-even"><td><p>stop</p></td>
<td><p>integer</p></td>
</tr>
<tr class="row-odd"><td><p>switched</p></td>
<td><p>‘scan_start’ or ‘each_minute’</p></td>
</tr>
<tr class="row-even"><td><p>t_cohere</p></td>
<td><p>float</p></td>
</tr>
<tr class="row-odd"><td><p>use_samples</p></td>
<td><p>‘true’ or ‘false’</p></td>
</tr>
<tr class="row-even"><td><p>weak_channel</p></td>
<td><p>float</p></td>
</tr>
</tbody>
</table>
</section>
<section id="deprecated">
<h2>DEPRECATED<a class="headerlink" href="#deprecated" title="Link to this heading"></a></h2>
<p>The following keywords are for backward mk4 compatibility only.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>KEYWORD</p></th>
<th class="head"><p>VALUES</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>max_parity</p></td>
<td><p>float</p></td>
</tr>
<tr class="row-odd"><td><p>x_crc</p></td>
<td><p>‘keep’ or ‘discard’</p></td>
</tr>
<tr class="row-even"><td><p>x_slip_sync</p></td>
<td><p>‘keep’, ‘discard’, or an integer</p></td>
</tr>
<tr class="row-odd"><td><p>y_crc</p></td>
<td><p>‘keep’ or ‘discard’</p></td>
</tr>
<tr class="row-even"><td><p>y_slip_sync</p></td>
<td><p>‘keep’, ‘discard’, or an integer</p></td>
</tr>
</tbody>
</table>
</section>
<section id="keyword-semantics">
<h2>KEYWORD SEMANTICS<a class="headerlink" href="#keyword-semantics" title="Link to this heading"></a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 85.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>KEYWORD</p></th>
<th class="head"><p>VALUES</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td></td>
<td><p><strong>scan selection – determines if a particular scan/baseline is processed</strong></p></td>
</tr>
<tr class="row-odd"><td><p>skip</p></td>
<td><p>if this is set to true in the body of an if_block, then any scans matching the if conditions will be skipped.
Note: as of 99.2.19 fourfit will not properly skip data if f_group is specified.</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p><strong>filtering – determines whether or not each AP is accepted</strong></p></td>
</tr>
<tr class="row-odd"><td><p>freqs</p></td>
<td><p>controls which frequency channels get included in the fit.
The letters a–p correspond to the order that the frequencies appear in the root file (assuming 16 channels).
With no suffix, DSB is implied, if both sidebands are present.
A plus suffix denotes USB, a minus is used for LSB.
After 26 channels, the uppercase alphabet is used, then 10 digits, finally ‘$’ and ‘%’ (i.e., 64 channels).</p></td>
</tr>
<tr class="row-even"><td><p>start</p></td>
<td><p>start time for data to be included.</p></td>
</tr>
<tr class="row-odd"><td><p>stop</p></td>
<td><p>stop time for data to be included.
Arguments of start and stop are integers with an optional minus sign.
A positive integer is interpreted as an absolute time in seconds past the hour (of the scan start time).
When a minus sign precedes the start time it is considered to be a time relative to, and later than, the scheduled scan start.
Similarly, a negative stop time precedes the scheduled scan stop time, by the indicated number of seconds.</p></td>
</tr>
<tr class="row-even"><td><p>switched</p></td>
<td><p>turns on (frequency) switched mode, which discards some APs and keeps others, depending on a gating waveform</p></td>
</tr>
<tr class="row-odd"><td><p>period</p></td>
<td><p>period in seconds of the gating waveform</p></td>
</tr>
<tr class="row-even"><td><p>gates</p></td>
<td><p>for each frequency channel, the starting delay and duration, in seconds, of the gating waveform</p></td>
</tr>
<tr class="row-odd"><td><p>passband</p></td>
<td><p>lower and upper bounds (in MHz) of the spectral passband of data to be accepted, specified as RF frequencies.
If the lower bound is greater than the upper bound, the range wraps around—allowing a band in the middle to be excluded.
The data is rescaled to preserve the amplitude observable (as if the excluded data were perfectly valid);
this means that the area under the cross-power spectral plot amplitude curve is approximately conserved.</p></td>
</tr>
<tr class="row-even"><td><p>notches</p></td>
<td><p>a list of non-overlapping lower/upper bound pairs (in MHz) to exclude from the spectral passband.
(Passband may be applied prior to removal of these notches.)
Note that the amplitude modification calculus isn’t sophisticated enough to detect overlaps between passband and notches,
so be sure to keep them disjoint. A large number is supported; you’ll get a complaint if you exceed it.
As with passband, spectral data is rescaled to preserve amplitude observables.</p></td>
</tr>
<tr class="row-odd"><td><p>dc_block</p></td>
<td><p>if set to true, zero out lowest cross-power spectral channel; useful for suppressing DC bias</p></td>
</tr>
<tr class="row-even"><td><p>min_weight</p></td>
<td><p>fraction of data which must be present for inclusion.
Normally, a weight between 0.0 and 1.0 is provided by the correlator to represent the fraction of data actually
supporting the correlation value. If you specify a minimum weight, any AP not meeting this threshold will be discarded.</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p><strong>search – control the fringe-searching process</strong></p></td>
</tr>
<tr class="row-even"><td><p>sb_win</p></td>
<td><p>single band delay search window bounds, in us</p></td>
</tr>
<tr class="row-odd"><td><p>mb_win</p></td>
<td><p>multiband delay search window bounds, in us; if the upper bound (2nd number) is less
than the lower bound (1st number), then fourfit performs a “wrap-around” search, in order to
handle the case of a delay near to the multiband (semi-) ambiguity.</p></td>
</tr>
<tr class="row-even"><td><p>dr_win</p></td>
<td><p>delay_rate search window bounds, in us/s</p></td>
</tr>
<tr class="row-odd"><td><p>ion_npts</p></td>
<td><p>number of evaluation points in ionospheric coarse search</p></td>
</tr>
<tr class="row-even"><td><p>ion_smooth</p></td>
<td><p>if true, use alternative search on smoothed TEC grid points</p></td>
</tr>
<tr class="row-odd"><td><p>ion_win</p></td>
<td><p>ionospheric coarse search window in TEC units</p></td>
</tr>
<tr class="row-even"><td><p>ra_offset</p></td>
<td><p>apply right asc. offset (asec) to re-center search windows</p></td>
</tr>
<tr class="row-odd"><td><p>dec_offset</p></td>
<td><p>apply declination offset (asec) to re-center search windows</p></td>
</tr>
<tr class="row-even"><td><p>interpolator</p></td>
<td><p>selects method of fit interpolation. Classically, an iterative search has been done over sbd, mbd, drate,
one dimension at a time, for 3 cycles. The simultaneous mode constructs
a 5x5x5 cube of data points and does a 3D quintic interpolation.</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p><strong>corrections – apply corrections to the data, either before or after fit</strong></p></td>
</tr>
<tr class="row-even"><td><p>pc_mode</p></td>
<td><p>specify phase_cal mode:
- normal (model linear in time is extracted from the data)
- manual (specified totally by the user)
- ap_by_ap (phase cal is extracted independently for each AP) — DEPRECATED: use normal or manual with pc_period 1 or more
- multitone (all tones in band are coherently fit, and phase is extrapolated to the center of the band)</p></td>
</tr>
<tr class="row-odd"><td><p>pc_phases</p></td>
<td><p>phase_cal phases in deg, for each of the listed freq channels; these offset phases are added to the underlying model, as specified by pc_mode, above. If 2 polarizations are present, the same values are applied to both pols.</p></td>
</tr>
<tr class="row-even"><td><p>pc_phases_l</p></td>
<td><p>specified in same manner as pc_phases, but the tone phases so specified are applied only to the first pol (L, X, or H)</p></td>
</tr>
<tr class="row-odd"><td><p>pc_phases_r</p></td>
<td><p>specified in same manner as pc_phases, but the tone phases so specified are applied only to the second pol (R, Y, or V)</p></td>
</tr>
<tr class="row-even"><td><p>pc_phases_x</p></td>
<td><p>synonym for pc_phases_l (see)</p></td>
</tr>
<tr class="row-odd"><td><p>pc_phases_y</p></td>
<td><p>synonym for pc_phases_r (see)</p></td>
</tr>
<tr class="row-even"><td><p>pc_freqs</p></td>
<td><p>phase cal tone frequencies in KHz, for each of the listed freq channels iff not in range -64..64.
Inside of this range, the value is interpreted as a tone #, with 1 being the 1st USB tone,
2 being the 2nd USB tone, etc. Negative tone #’s are used for LSB tones.</p></td>
</tr>
<tr class="row-odd"><td><p>pc_period</p></td>
<td><p>in multitone mode (only), the phase can be estimated and applied over each pc_period ap’s,
thus removing slopes or other drifts in pcal (default is 9999)</p></td>
</tr>
<tr class="row-even"><td><p>pc_tonemask</p></td>
<td><p>in multitone mode (only): the values for pc_tonemask form a bit-masked map of which tones to
exclude for this frequency channel. Thus 1 excludes the lowest tone, 2 the next lower tone,
4 the 3rd lowest tone, etc. A value of 5, for example, would exclude the lowest and the 3rd lowest tones (perhaps 10 KHz and 2.01 MHz).</p></td>
</tr>
<tr class="row-odd"><td><p>pc_delay_l</p></td>
<td><p>a time value in ns representing the difference between the travel time from the feed phase
center to the pcal injection point, minus the travel time from the pcal pulse generator to
the injection point. It is specified separately for the two polarization senses.</p></td>
</tr>
<tr class="row-even"><td><p>pc_delay_r</p></td>
<td><p>see pc_delay_l</p></td>
</tr>
<tr class="row-odd"><td><p>pc_delay_x</p></td>
<td><p>synonym for pc_delay_l</p></td>
</tr>
<tr class="row-even"><td><p>pc_delay_y</p></td>
<td><p>synonym for pc_delay_r</p></td>
</tr>
<tr class="row-odd"><td><p>pc_phase_offset_x</p></td>
<td><p>a single additive phase given in degrees, which is applied to the pcal phase
of every channel associated with a given polarization</p></td>
</tr>
<tr class="row-even"><td><p>pc_phase_offset_y</p></td>
<td><p>see pc_phase_offset_x (also pc_phase_offset_l and pc_phase_offset_r)</p></td>
</tr>
<tr class="row-odd"><td><p>lsb_offset</p></td>
<td><p>additive phase in degrees, for the LSB relative to the USB; often necessary when correlating VLBA data against Mk3</p></td>
</tr>
<tr class="row-even"><td><p>ref_freq</p></td>
<td><p>specifies a frequency in MHz at which the phase delay is determined (default is total LO of first frequency)</p></td>
</tr>
<tr class="row-odd"><td><p>adhoc_phase</p></td>
<td><p>specify mode of ad hoc phase corrections. No corrections are made if this isn’t present, or is set to false.</p></td>
</tr>
<tr class="row-even"><td><p>adhoc_period</p></td>
<td><p>for ad hoc sinewave model; the period in integer seconds</p></td>
</tr>
<tr class="row-odd"><td><p>adhoc_amp</p></td>
<td><p>for ad hoc sinewave model; amplitude in degrees of phase (for ad hoc phase model).</p></td>
</tr>
<tr class="row-even"><td><p>adhoc_tref</p></td>
<td><p>for both ad hoc phase models; the reference time in seconds past the most recent hour.</p></td>
</tr>
<tr class="row-odd"><td><p>adhoc_poly</p></td>
<td><p>for the ad hoc phase polynomial model; from 1–6 coefficients describing a power-series model in time. (deg/sec^{n})</p></td>
</tr>
<tr class="row-even"><td><p>adhoc_flag_file</p></td>
<td><p>Name of the file containing adhoc flagging.  Lines of this
contain times (floating point days from beginning of year) and
character strings to impose data flagging at a particular time
(which remains in effect until the next time mentioned).  The
character string has two characters per channel with a nonzero
bit for data to be retained with the bit assignments as follows:
(msb)USB-RL,LSB-RL,USB-LR,LSB-LR,USB-RR,LSB-RR,USB-LL,LSB-LL(lsb)
If the string is too short, the last byte will be replicated to
the remaining channels, so a single FF is adquate to retain all
or a single 00 to discard all.</p></td>
</tr>
<tr class="row-odd"><td><p>adhoc_file</p></td>
<td><p>name of the file containing phases in the ad hoc file mode.</p></td>
</tr>
<tr class="row-even"><td><p>adhoc_file_chans</p></td>
<td><p>string of channel labels for phases (columns) in the ad hoc file.</p></td>
</tr>
<tr class="row-odd"><td><p>use_samples</p></td>
<td><p>if true, use the sampler statistics (aka state counts) to normalize raw
correlation sums to the equivalent analog correlation.</p></td>
</tr>
<tr class="row-even"><td><p>ionosphere</p></td>
<td><p>specified per station, in TEC (10^{16}/m^{2}) units.</p></td>
</tr>
<tr class="row-odd"><td><p>t_cohere</p></td>
<td><p>coherence time used in fringe fit (default is infinite).</p></td>
</tr>
<tr class="row-even"><td><p>delay_offs</p></td>
<td><p>delay offsets (ns) to be applied to each listed frequency channel. This correction is made prefit, similar to pcal.</p></td>
</tr>
<tr class="row-odd"><td><p>delay_offs_l</p></td>
<td><p>same as delay_offs, but restricted to LCP.</p></td>
</tr>
<tr class="row-even"><td><p>delay_offs_r</p></td>
<td><p>same as delay_offs, but restricted to RCP.</p></td>
</tr>
<tr class="row-odd"><td><p>delay_offs_x</p></td>
<td><p>same as delay_offs, but restricted to X linear polarization.</p></td>
</tr>
<tr class="row-even"><td><p>delay_offs_y</p></td>
<td><p>same as delay_offs, but restricted to Y linear polarization.</p></td>
</tr>
<tr class="row-odd"><td><p>samplers</p></td>
<td><p>number of samplers, followed by freq channel identifiers of channels sharing a sampler,
grouped in strings. In multitone mode only, averaged tone-derived differential delays are applied to all grouped channels.</p></td>
</tr>
<tr class="row-even"><td><p>optimize_closure</p></td>
<td><p>modifies fine fringe search to minimize non-closing delay errors in closure phase;
may degrade single-baseline fits.</p></td>
</tr>
<tr class="row-odd"><td><p>station_delay</p></td>
<td><p>a priori guess at the delay of the pcal path, from maser
to the digitizers (ns). Recommended to use
sampler_delay_l/r/x/y instead.</p></td>
</tr>
<tr class="row-even"><td><p>mbd_anchor</p></td>
<td><p>controls how mbd ambiguity is resolved: if ‘sbd’, uses the one closest to
the singleband delay; if ‘model’, uses one closest to the a priori model.</p></td>
</tr>
<tr class="row-odd"><td><p>sampler_delay_l</p></td>
<td><p>indexed by sampler; the center of the window where the pcal delay ambiguity
is resolved. Like ‘station_delay’ but split by sampler and polarization. For LCP, in ns.</p></td>
</tr>
<tr class="row-even"><td><p>sampler_delay_r</p></td>
<td><p>same as above, but for RCP instead of LCP.</p></td>
</tr>
<tr class="row-odd"><td><p>sampler_delay_x</p></td>
<td><p>synonym for sampler_delay_l.</p></td>
</tr>
<tr class="row-even"><td><p>sampler_delay_y</p></td>
<td><p>synonym for sampler_delay_r.</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p><strong>miscellaneous functions</strong></p></td>
</tr>
<tr class="row-even"><td><p>chan_ids</p></td>
<td><p>changes the assignment of the channel labels
“abcdef..xyzABC..XYZ01..789$%” from the default values
to the ones specified by the corresponding list of floats
This is useful to prevent mis-matched IFs within one experiment
from causing the same channel label to be ambiguously used on
various baselines.  (You should ideally use exactly the same
frequencies as would be assigned by default.)</p></td>
</tr>
<tr class="row-odd"><td><p>plot_data_dir</p></td>
<td><p>if present will be used as a path to dump the plot data
in a self-documented ascii form to allow export of plot
information to other arenas (specialized plots, &amp;c).  One
file per fringe is written; more help is available within
the files that are produced: there is help for the options
that may be used to manipulate the content.</p></td>
</tr>
<tr class="row-even"><td><p>fmatch_bw_pct</p></td>
<td><p>associate frequencies that are within this percentage of bandwidth together (default is 25%).</p></td>
</tr>
<tr class="row-odd"><td><p>pc_amp_hcode</p></td>
<td><p>generate an H code if any phase cal amplitudes are less than this threshold (default is 0.005).</p></td>
</tr>
<tr class="row-even"><td><p>weak_channel</p></td>
<td><p>the ratio of single_channel_amp to coherent_sum_amp below which a G code is assigned to the scan (default is 0.5).</p></td>
</tr>
<tr class="row-odd"><td><p>gen_cf_record</p></td>
<td><p>if true, saves the full control file in the fringe record.</p></td>
</tr>
<tr class="row-even"><td><p>est_pc_manual</p></td>
<td><p>if nonzero, estimates manual <cite>pc_phase_?</cite> and <cite>delay_offs_?</cite> values. A positive value estimates the reference station,
negative for the remote station. The magnitude is a bitmask:
- <cite>0x01</cite>: estimate phase
- <cite>0x02</cite>: median channel single-band delay
- <cite>0x04</cite>: average single-band delay
- <cite>0x08</cite>: use total single-band delay
- <cite>0x10</cite>: use original per-channel delay
- <cite>0x20</cite>: enable heuristics to discard outliers
- <cite>0x40</cite>: report phase as <cite>pc_phase_offset_?</cite>
- <cite>0x80</cite>: use environment variable <cite>HOPS_EST_PC_BIAS</cite> for phase bias
Channels in the <cite>-f</cite> and <cite>-n</cite> range (inclusive) are used. Conflicting options for delay estimation result in no corrections.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="special-keyword-values">
<h2>SPECIAL KEYWORD VALUES<a class="headerlink" href="#special-keyword-values" title="Link to this heading"></a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 50.0%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>KEYWORD</p></th>
<th class="head"><p>VALUE</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>?</p></td>
<td><p>wild card character</p></td>
</tr>
<tr class="row-odd"><td><p>keep</p></td>
<td><p>32767</p></td>
</tr>
<tr class="row-even"><td><p>discard</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>true</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p>false</p></td>
<td><p>0</p></td>
</tr>
</tbody>
</table>
</section>
<section id="special-formats">
<h2>SPECIAL FORMATS<a class="headerlink" href="#special-formats" title="Link to this heading"></a></h2>
<blockquote>
<div><dl class="simple">
<dt>UT-epochs:</dt><dd><p>UT-epochs are expressed in the format <code class="docutils literal notranslate"><span class="pre">ddd-hhmmss</span></code>, where all 10
characters are necessary, including leading 0’s if
appropriate.  This format will match that of a scan directory,
if the UT-epoch that is being specified is an actual scan time.</p>
</dd>
</dl>
</div></blockquote>
</section>
<section id="general-guidelines">
<h2>GENERAL GUIDELINES<a class="headerlink" href="#general-guidelines" title="Link to this heading"></a></h2>
<blockquote>
<div><ol class="arabic simple">
<li><p>White space is ignored; i.e., multiple spaces and line feeds all
collapse to a single space.</p></li>
<li><p>Multiple commands per line are fine.</p></li>
<li><p>Comments: anything from an asterisk through the end of the line
is ignored.</p></li>
<li><p>Nested ifs are not allowed (or necessary). Nested parentheses in
an if condition are fine (NYI).
As of 94.1.16, parentheses are not supported. The logical operators,
in decreasing order of precedence are (not, and, or).</p></li>
<li><p>Wildcard “?” matches any single character for f_group, station, or
baseline, any string (of up to 8 characters) for source, and any
time-value for scan.</p></li>
<li><p>Phase cal and delay offsets are treated station by station. If not
in a “station context”, then values are applied to remote stn only.</p></li>
<li><p>Only freqs that are chosen for both stations in a baseline are
present in the fit.</p></li>
<li><p>If multiple if-blocks match a particular passes’ choice of baseline,
f_group, source, and scan criteria, then the later values assigned
to each parameter overwrite the earlier ones.</p></li>
</ol>
</div></blockquote>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../hops3.html" class="btn btn-neutral float-left" title="HOPS3 Applications and Libraries" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="alist.html" class="btn btn-neutral float-right" title="alist" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, MIT Haystack Observatory.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>